# 适合的索引和不适合的索引

## 不合适的索引

1. 索引查询速度没有全文搜索快

2. [新增索引代价，弊大于利](新增索引的代价.md)

3. 多余的索引

    1. 完全多余的索引

        由于存在where A=a and B=b 和 where B=b and A=a 两个sql，就建立了索引(A,B)和(B,A),其中一个索引是多余的，可以通过优化sql来删除一个索引

    2. 近乎多余的索引

        原有索引(A,B,C),新加的理想索引为(A,B,C,D,E),那么原有索引成为一个近乎多余的索引

    3. 可能多余的索引

        原有索引(A,B,F,C),新加的理想索引为(A,B,C,D,E,F),那么如果把原索引改成(A,B,F,C,D,E),也许新的索引是多余的

        理想索引可能可以避免排序

## 适合的索引

1. [三星索引](什么是三星索引.md)

2. 在无法达到三星的时候，优先选择满足第三星

3. 对于第一星和第二星需要进行权衡舍弃

    - 舍弃第一星：

        如果返回的数据集非常大，如果舍弃第二星，会造成排序操作，增加CPU负担，因此建议舍弃第一星

    - 舍弃第二星：

        如果只返回单屏数据（数据量不大），此时排序不会损失过多的性能，可以舍弃第二星，因为第一星可以将索引片宽度缩减至最窄
